<div class="page-dashboard">
  <h1>DASHBOARD</h1>
  <div class="usuarios card">
    <div class="title">
      <h2>USUÁRIOS CADASTRADOS</h2>
    </div>
    <h2 class="total-usuarios">{{ usuariosTotal }}</h2>
  </div>
  <div class="servicos card">
    <h2 class="title">SERVIÇOS MAIS AGENDADOS</h2>
    <div class="servicos-content">
      @for (servico of servicosTotal; track servico) {
      <div class="servico">
        <h3>{{ servico.nome_servico }}</h3>
        <h3>{{ servico.agendamentos_count }}</h3>
      </div>
      }
    </div>
  </div>
  <div class="animais card">
    <h2 class="title">ANIMAIS MAIS ATENDIDOS</h2>
    <div class="animais-content">
      @for (animal of animaisTotal; track animal) {
      <div class="animal">
        <h3>{{ animal.tipo_animal }}</h3>
        <h3>{{ animal.total }}</h3>
      </div>
      }
    </div>
  </div>
  <div class="pets card">
    <h2 class="title">
      PETS <br />
      CADASTRADOS
    </h2>
    <div class="pets-content">
      <h2 class="total-pets">
        {{ animaisTotal[0].total + animaisTotal[1].total }}
      </h2>
    </div>
  </div>
  <div class="tables card">
    <div class="table">
      <div class="table-title">
        <h2>PRÓXIMOS ATENDIMENTOS</h2>
        <h3>TOTAL: {{ nextAgenda.length }}</h3>
      </div>
      @if (nextAgenda.length > 0) {
      <div class="atendimentos">
        @for (item of nextAgenda; track $index) {
        <div class="atendimento">
          <div class="icon-pet">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="32"
              height="32"
              viewBox="0 0 24 24"
              fill="none"
              stroke="#219799"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-paw-print h-6 w-6 text-primary"
            >
              <circle cx="11" cy="4" r="2"></circle>
              <circle cx="18" cy="8" r="2"></circle>
              <circle cx="20" cy="16" r="2"></circle>
              <path
                d="M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z"
              ></path>
            </svg>
          </div>
          <div class="nomes">
            <h3 class="nome-pet">{{ item.pet.nome }}</h3>
            <h4 class="nome-tutor">Tutor: {{ item.pet.dono.nome }}</h4>
          </div>
          <!-- <h3 class="data"></h3> -->
          <div class="horario">
            <h3 class="servico">
              <div class="icon-servico">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  fill="#219799"
                  height="24"
                  width="24"
                  version="1.1"
                  id="Capa_1"
                  viewBox="0 0 475.558 475.558"
                  xml:space="preserve"
                >
                  <g id="XMLID_136_">
                    <path
                      id="XMLID_137_"
                      d="M259.988,404.297c0,14.408,11.67,26.079,26.078,26.079s26.078-11.671,26.078-26.079   c0-9.43-9.647-20.494-17.311-31.621c-4.198-6.094-13.164-6.092-17.368-0.001C269.8,383.78,259.988,394.887,259.988,404.297z"
                    />
                    <path
                      id="XMLID_138_"
                      d="M331.95,343.465c0,14.408,11.67,26.077,26.078,26.077s26.078-11.669,26.078-26.077   c0-9.425-9.646-20.491-17.312-31.619c-4.198-6.095-13.165-6.093-17.369-0.002C341.761,322.951,331.95,334.06,331.95,343.465z"
                    />
                    <path
                      id="XMLID_139_"
                      d="M188.026,343.465c0,14.408,11.67,26.077,26.078,26.077c14.408,0,26.078-11.669,26.078-26.077   c0-9.425-9.646-20.491-17.311-31.619c-4.198-6.095-13.166-6.093-17.369-0.002C197.838,322.951,188.026,334.06,188.026,343.465z"
                    />
                    <path
                      id="XMLID_140_"
                      d="M258.763,111.628c-54.178,9.808-95.189,48.058-97.801,94.514c-0.063,1.226,0.365,2.428,1.211,3.319   c0.843,0.892,2.021,1.4,3.247,1.4h241.294c1.225,0,2.404-0.509,3.23-1.4c0.845-0.892,1.29-2.093,1.227-3.319   c-2.69-47.77-45.932-86.887-102.401-95.294C298.931,48.16,244.722,0,179.304,0c-72.36,0-131.22,58.868-131.22,131.219v319.884   c0,13.51,10.954,24.454,24.454,24.454c13.502,0,24.454-10.944,24.454-24.454V131.219c0-45.39,36.921-82.311,82.311-82.311   C217.624,48.908,249.64,75.361,258.763,111.628z"
                    />
                    <path
                      id="XMLID_141_"
                      d="M411.171,234.001H160.962c-9.012,0-16.302,7.3-16.302,16.302c0,9.005,7.29,16.303,16.302,16.303h250.209   c9.012,0,16.303-7.298,16.303-16.303C427.474,241.302,420.183,234.001,411.171,234.001z"
                    />
                  </g>
                </svg>
              </div>
              {{ item.servico.nome_servico }}
            </h3>
            <h4 class="hora">
              {{ formatDate(item.data_agendamento) }} -
              {{ formatHours(item.hora_agendamento) }}
            </h4>
          </div>
        </div>
        }
      </div>
      <!-- <table>
        <thead>
          <tr>
            <th>Serviço</th>
            <th>Cliente</th>
            <th>Data</th>
            <th>Horário</th>
          </tr>
        </thead>
        <tbody>
          @for (item of nextAgenda; track item) {
          <tr>
            <td>{{ item.servico.nome_servico }}</td>
            <td>{{ item.pet.dono.nome }}</td>
            <td>{{ formatDate(item.data_agendamento) }}</td>
            <td>{{ formatHours(item.hora_agendamento) }}</td>
          </tr>
          }
        </tbody>
      </table> -->
      } @else {
      <h3 style="text-align: center">Nenhum agendamento futuro encontrado</h3>
      }
    </div>
    <div class="table">
      <div class="table-title">
        <h2>ÚLTIMOS ATENDIMENTOS</h2>
        <h3>TOTAL: {{ prevAgenda.length }}</h3>
      </div>
      @if (prevAgenda.length > 0) {
      <div class="atendimentos">
        @for (item of prevAgenda; track $index) {
        <div class="atendimento">
          <div class="icon-pet">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="32"
              height="32"
              viewBox="0 0 24 24"
              fill="none"
              stroke="#219799"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-paw-print h-6 w-6 text-primary"
            >
              <circle cx="11" cy="4" r="2"></circle>
              <circle cx="18" cy="8" r="2"></circle>
              <circle cx="20" cy="16" r="2"></circle>
              <path
                d="M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z"
              ></path>
            </svg>
          </div>
          <div class="nomes">
            <h3 class="nome-pet">{{ item.pet.nome }}</h3>
            <h4 class="nome-tutor">Tutor: {{ item.pet.dono.nome }}</h4>
          </div>
          <!-- <h3 class="data"></h3> -->
          <div class="horario">
            <h3 class="servico">
              <div class="icon-servico">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  fill="#219799"
                  height="24"
                  width="24"
                  version="1.1"
                  id="Capa_1"
                  viewBox="0 0 475.558 475.558"
                  xml:space="preserve"
                >
                  <g id="XMLID_136_">
                    <path
                      id="XMLID_137_"
                      d="M259.988,404.297c0,14.408,11.67,26.079,26.078,26.079s26.078-11.671,26.078-26.079   c0-9.43-9.647-20.494-17.311-31.621c-4.198-6.094-13.164-6.092-17.368-0.001C269.8,383.78,259.988,394.887,259.988,404.297z"
                    />
                    <path
                      id="XMLID_138_"
                      d="M331.95,343.465c0,14.408,11.67,26.077,26.078,26.077s26.078-11.669,26.078-26.077   c0-9.425-9.646-20.491-17.312-31.619c-4.198-6.095-13.165-6.093-17.369-0.002C341.761,322.951,331.95,334.06,331.95,343.465z"
                    />
                    <path
                      id="XMLID_139_"
                      d="M188.026,343.465c0,14.408,11.67,26.077,26.078,26.077c14.408,0,26.078-11.669,26.078-26.077   c0-9.425-9.646-20.491-17.311-31.619c-4.198-6.095-13.166-6.093-17.369-0.002C197.838,322.951,188.026,334.06,188.026,343.465z"
                    />
                    <path
                      id="XMLID_140_"
                      d="M258.763,111.628c-54.178,9.808-95.189,48.058-97.801,94.514c-0.063,1.226,0.365,2.428,1.211,3.319   c0.843,0.892,2.021,1.4,3.247,1.4h241.294c1.225,0,2.404-0.509,3.23-1.4c0.845-0.892,1.29-2.093,1.227-3.319   c-2.69-47.77-45.932-86.887-102.401-95.294C298.931,48.16,244.722,0,179.304,0c-72.36,0-131.22,58.868-131.22,131.219v319.884   c0,13.51,10.954,24.454,24.454,24.454c13.502,0,24.454-10.944,24.454-24.454V131.219c0-45.39,36.921-82.311,82.311-82.311   C217.624,48.908,249.64,75.361,258.763,111.628z"
                    />
                    <path
                      id="XMLID_141_"
                      d="M411.171,234.001H160.962c-9.012,0-16.302,7.3-16.302,16.302c0,9.005,7.29,16.303,16.302,16.303h250.209   c9.012,0,16.303-7.298,16.303-16.303C427.474,241.302,420.183,234.001,411.171,234.001z"
                    />
                  </g>
                </svg>
              </div>
              {{ item.servico.nome_servico }}
            </h3>
            <h4 class="hora">
              {{ formatDate(item.data_agendamento) }} -
              {{ formatHours(item.hora_agendamento) }}
            </h4>
          </div>
        </div>
        }
      </div>
      <!-- <table>
        <thead>
          <tr>
            <th>Serviço</th>
            <th>Cliente</th>
            <th>Data</th>
            <th>Horário</th>
          </tr>
        </thead>
        <tbody>
          @for (item of prevAgenda; track item) {
          <tr>
            <td>{{ item.servico.nome_servico }}</td>
            <td>{{ item.pet.dono.nome }}</td>
            <td>{{ formatDate(item.data_agendamento) }}</td>
            <td>{{ formatHours(item.hora_agendamento) }}</td>
          </tr>
          }
        </tbody>
      </table> -->
      } @else {
      <h3 style="text-align: center">Nenhum agendamento anterior encontrado</h3>
      }
    </div>
  </div>
</div>
